<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.bjwg.main.dao.activeOrderDao" >
  <resultMap id="BaseResultMap" type="com.bjwg.main.model.ActiveOrder" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="ao_orderId" property="orderId" jdbcType="BIGINT" />
    <result column="ao_orderCode" property="orderCode" jdbcType="VARCHAR" />
    <result column="ao_userId"   property="userId" jdbcType="BIGINT" />
    <result column="ao_price" property="price" jdbcType="DECIMAL" />
    <result column="ao_count" property="count" jdbcType="SMALLINT" />
    <result column="ao_totalPrice" property="totalPrice" jdbcType="DECIMAL" />
    <result column="ao_activeId" property="activeId" jdbcType="BIGINT" />
    <result column="ao_status" property="status" jdbcType="TINYINT" />
  </resultMap>
  

  

  <select id="selectList" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select *
    from bjwg_activeorder ao

  </select>
  
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select * 
    from bjwg_activeorder ao where ao.orderId=#{orderId,jdbcType=BIGINT}

  </select>
  
   <select id="selectMywinningCode" resultMap="BaseResultMap" parameterType="com.bjwg.main.model.ActiveOrder">
    
    select * 
    from bjwg_activeorder ao where ao.userId=#{userId,jdbcType=BIGINT}
    and ao.status=#{status,jdbcType=TINYINT} and ao.activeId=#{activeId,jdbcType=BIGINT}

  </select>
  
  <select id="selectWinningCode" resultMap="BaseResultMap" parameterType="com.bjwg.main.model.ActiveOrder">
    
    select * 
    from bjwg_activeorder ao where  ao.status=#{status,jdbcType=TINYINT}
     and ao.activeId=#{activeId,jdbcType=BIGINT}
  </select>
  
  
  
  
  
  <select id="selectByCode" resultMap="BaseResultMap" parameterType="java.lang.String">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select *
    from bjwg_activeorder ao where ao.orderCode=#{orderCode,jdbcType=VARCHAR}

  </select>
  
  
  
  <insert id="insertOrder" parameterType="com.bjwg.main.model.ActiveOrder" >
    insert into bjwg_activeorder(userId,price,count,totalPrice,activeId,status,orderCode)
    values (#{userId,jdbcType=BIGINT},#{price,jdbcType=DECIMAL},#{count,jdbcType=SMALLINT},
    #{totalPrice,jdbcType=DECIMAL},#{activeId,jdbcType=BIGINT}, #{status,jdbcType=TINYINT},
    #{orderCode,jdbcType=VARCHAR}
    )

  </insert>
  
  <update id="updateStatus"  parameterType="com.bjwg.main.model.ActiveOrder">
        update bjwg_activeorder set status= #{status,jdbcType=TINYINT}
        where orderId=#{orderId,jdbcType=BIGINT}
  </update>
  
  
<!-- 上一期结束，删除数据 -->
  
  
  <delete id="deleteAll" parameterType="java.lang.Long">
     delete from bjwg_activeorder ao where ao.activeId=#{activeId,jdbcType=BIGINT}
  
  </delete>
  
  
  
  
  
  
</mapper>